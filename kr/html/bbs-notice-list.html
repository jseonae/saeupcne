<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title th:text="${pageTitle}">일반게시판 목록</title>

<!-- CSS -->
<link href="https://cdn.jsdelivr.net/npm/krds-uiux@1.0.1/resources/cdn/krds.min.css" type="text/css" rel="stylesheet" />
<link rel="stylesheet" href="../css/krds-theme.css">
<link rel="stylesheet" href="../css/user-custom.css">
<!-- jQuery -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<!-- JavaScript (defer로 지연 로드 권장) -->
<script defer src="https://cdn.jsdelivr.net/npm/krds-uiux@1.0.1/resources/cdn/krds.min.js"></script>

<script>
  // 문서가 준비되면 header와 footer를 불러오기
  $(function() {
    $("#header").load("../tmpl/header.html");
    $("#footer").load("../tmpl/footer.html");
  });
</script>
</head>
<body>
<div id="wrap">
  <!-- 본문 바로가기 영역  -->
  <div id="krds-skip-link">
    <a href="#breadcrumb">본문 바로가기</a>
  </div>
  <!-- //본문 바로가기 영역  -->

  <!-- header include -->
  <header id="header"></header>
  <!-- //header include -->

  <div id="container">
    <!-- breadcrumb -->
    <nav class="krds-breadcrumb-wrap" aria-label="현재 경로" id="breadcrumb">
    <ol class="breadcrumb">
      <li class="home"><a href="#" class="txt">홈</a></li>
      <li><a href="#" class="txt">서비스 신청</a></li>
      <li><a href="#" class="txt">서비스 신청2</a></li>
    </ol>
    </nav>
    <!-- //breadcrumb -->

    <!-- inner -->
    <div class="inner">

      <div class="g-search-area">
        <!-- krds search -->
        <div class="search-top-box">
          <div class="form-col-group">
            <div class="form-group">
              <div class="sch-form-wrap">
                <div class="sch-select">
                  <label for="year-type" class="blind">년도선택</label>
                  <select id="year-type" class="krds-form-select">
                    <option value="" selected>년도선택</option>
                    <option value="">2025</option>
                    <option value="">2024</option>
                  </select>
                </div>
              </div>
            </div>
            <div class="form-group">
              <div class="sch-form-wrap">
                <div class="sch-input">
                  <label for="search-wrd" class="blind">검색어</label>
                  <input type="text" id="search-wrd" class="krds-input" placeholder="제목, 내용 입력" title="키워드 입력">
                  <button type="button" class="krds-btn medium icon ico-search btn-exec" id="btn-search">
                    <span class="sr-only">검색</span>
                    <i class="svg-icon ico-sch"></i>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- //krds search -->
        <div class="search-list-top">
          <ul class="sch-info" aria-live="polite">
            <li>총<span class="point">22,459</span>건</li>
          </ul>
        </div>
        <!-- list -->
        <div class="krds-structured-list type3">
            <ul class="community-notice-list"> 
              <li class="search-item">
                <a href="#" class="notif">
                  <span class="category">공지</span>
                  <p class="title">
                    <strong class="visited">2025년 사제동행 공감체험 「함께 걷는 평화톡톡」</strong>
                    <i class="svg-icon ico-file"><span class="sr-only">첨부파일</span></i>
                  </p>
                  <span class="group">정책기획과</span>
                  <span class="date">2025.09.08</span>
                </a>
              </li>

              
              <li class="search-item">
                <a href="#">
                  <span class="category">27</span>
                  <p class="title">
                    <strong class="visited">2025년 사제동행 공감체험 「함께 걷는 평화톡톡」</strong>
                    <i class="svg-icon ico-file"><span class="sr-only">첨부파일</span></i>
                  </p>
                  <span class="group">정책기획과</span>
                  <span class="date">2025.09.08</span>
                </a>
              </li>

              <li class="search-item">
                <a href="#">
                  <span class="category">27</span>
                  <p class="title">
                    <strong class="visited">2025년 사제동행 공감체험 「함께 걷는 평화톡톡」</strong>
                    <i class="svg-icon ico-file"><span class="sr-only">첨부파일</span></i>
                  </p>
                  <span class="group">정책기획과</span>
                  <span class="date">2025.09.08</span>
                </a>
              </li>
              <li class="search-item">
                <a href="#">
                  <span class="category">27</span>
                  <p class="title">
                    <strong class="visited">2025년 사제동행 공감체험 「함께 걷는 평화톡톡」</strong>
                    <i class="svg-icon ico-file"><span class="sr-only">첨부파일</span></i>
                  </p>
                  <span class="group">정책기획과</span>
                  <span class="date">2025.09.08</span>
                </a>
              </li><li class="search-item">
                <a href="#">
                  <span class="category">27</span>
                  <p class="title">
                    <strong class="visited">2025년 사제동행 공감체험 「함께 걷는 평화톡톡」</strong>
                    <i class="svg-icon ico-file"><span class="sr-only">첨부파일</span></i>
                  </p>
                  <span class="group">정책기획과</span>
                  <span class="date">2025.09.08</span>
                </a>
              </li><li class="search-item">
                <a href="#">
                  <span class="category">27</span>
                  <p class="title">
                    <strong class="visited">2025년 사제동행 공감체험 「함께 걷는 평화톡톡」</strong>
                    <i class="svg-icon ico-file"><span class="sr-only">첨부파일</span></i>
                  </p>
                  <span class="group">정책기획과</span>
                  <span class="date">2025.09.08</span>
                </a>
              </li><li class="search-item">
                <a href="#">
                  <span class="category">27</span>
                  <p class="title">
                    <strong class="visited">2025년 사제동행 공감체험 「함께 걷는 평화톡톡」</strong>
                    <i class="svg-icon ico-file"><span class="sr-only">첨부파일</span></i>
                  </p>
                  <span class="group">정책기획과</span>
                  <span class="date">2025.09.08</span>
                </a>
              </li>
            </ul>
        </div>
        <!-- //list -->
        <!--pagination -->
        <div class="krds-pagination">
          <a class="page-navi prev" href="#">이전</a>
          <div class="page-links">
            <a class="page-link" href="#">1</a>
            <a class="page-link" href="#">2</a>
            <a class="page-link" href="#">3</a>
            <a class="page-link active" href="#"><span class="sr-only">현재페이지 </span>4</a>
            <a class="page-link" href="#">5</a>
            <a class="page-link" href="#">6</a>
            <a class="page-link" href="#">7</a>
            <a class="page-link" href="#">8</a>
            <a class="page-link" href="#">9</a>
            <span class="page-link link-dot"></span>
            <a class="page-link" href="#">99</a>
          </div>
          <a class="page-navi next" href="#">다음</a>
        </div>
        <!-- //pagination -->
      </div>
    
    </div><!-- //inner -->
  </div><!-- //container -->











  <!-- Bootstrap JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

  <!-- Live Server 전용 (Spring Boot에서 자동 제거) -->
  <script th:remove="all" src="../../assets/js/api.js"></script>
  <script th:remove="all" src="../../assets/js/common.js"></script>
  <script th:remove="all" src="../../assets/js/board.js"></script>

  <!-- 페이지별 렌더링 스크립트 -->
  <script th:remove="all">
    let paginationController;
    let allItems = [];

    document.addEventListener('DOMContentLoaded', async function() {
      try {
        // 표준 템플릿용 JSON 명시적 로드
        const data = await loadMockData('_templates/list.json');
        allItems = data.items || [];
        renderPage(data);
        initPagination();
      } catch (error) {
        console.error('렌더링 오류:', error);
      }
    });

    function renderPage(data) {
      // 공통 렌더링
      document.title = data.pageTitle;
      document.querySelector('h1 span').textContent = data.pageTitle;

      // 검색 타입 렌더링
      const searchTypeSelect = document.querySelector('#searchType');
      if (searchTypeSelect && data.searchTypes) {
        searchTypeSelect.innerHTML = '';
        data.searchTypes.forEach(type => {
          const option = document.createElement('option');
          option.value = type.value;
          option.textContent = type.label;
          if (type.value === data.selectedSearchType) {
            option.selected = true;
          }
          searchTypeSelect.appendChild(option);
        });
      }

      // 검색 키워드
      const searchInput = document.querySelector('#search');
      if (searchInput && data.search) {
        searchInput.value = data.search;
      }
    }

    function initPagination() {
      // ClientPagination 초기화
      paginationController = new ClientPagination(allItems, {
        pageSize: 10,
        onPageChange: (pageItems, paginationInfo) => {
          updateList(pageItems, paginationInfo);
        }
      });

      // 페이지당 항목수 변경 이벤트
      const itemsPerPageSelect = document.querySelector('#itemsPerPage');
      if (itemsPerPageSelect) {
        itemsPerPageSelect.addEventListener('change', (e) => {
          paginationController.setPageSize(e.target.value);
        });
      }

      // 초기 렌더링
      updateList(paginationController.getCurrentPageItems(), paginationController.getPaginationInfo());
    }

    function updateList(pageItems, paginationInfo) {
      // 목록 렌더링
      renderBoardList(pageItems, {
        tableBodySelector: 'tbody',
        noDataMessage: '등록된 항목이 없습니다.',
        onItemClick: (item) => {
          window.location.href = `view.html?id=${item.id}`;
        }
      });

      // 총 건수 업데이트
      const totalCountEl = document.querySelector('#totalCount');
      if (totalCountEl) {
        totalCountEl.textContent = formatNumber(paginationInfo.totalCount);
      }

      // 페이징 렌더링
      renderBoardPagination(paginationInfo, '.pagination', (page) => {
        paginationController.setPage(page);
      });
    }

    function searchItems() {
      const searchType = document.querySelector('#searchType').value;
      const search = document.querySelector('#search').value.trim();

      if (!search) {
        alertMessage('검색어를 입력해주세요.', 'warning');
        return;
      }

      const params = new URLSearchParams();
      params.set('searchType', searchType);
      params.set('search', search);
      params.set('page', '1');

      window.location.href = `?${params.toString()}`;
    }

    function downloadExcel() {
      alertMessage('엑셀 다운로드 (Mock 모드)', 'info');
      // 실제 구현: window.location.href = '/api/v1/export/excel';
    }
  </script>



 <!-- footer include -->
  <div id="footer"></div>
</div><!-- //wrap -->

<script src="../js/user-custom.js"></script>
</body>
</html>
